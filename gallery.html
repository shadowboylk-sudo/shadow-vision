<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shadow Vision - Gallery</title>
<link rel="stylesheet" href="css/staly.css">

</head>
<body>

<nav>
  <a href="index.html">Home</a>
  <a href="about.html">About</a>
</nav>

<main>
  <h1>Gallery</h1>

  <!-- Upload Section -->
  <div>
    <input type="file" id="photoFile">
    <button onclick="uploadPhoto(document.getElementById('photoFile').files[0])">Upload</button>
  </div>

  <!-- Gallery Display -->
  <div id="gallery" class="gallery">
    <!-- Uploaded photos will show here -->
  </div>
</main>

<footer>
  <p>&copy; 2025 Shadow Vision</p>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getStorage, ref, uploadBytes, getDownloadURL, listAll } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-storage.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyC2cseHiHj_hpXjUxU9699rliElIH9le1k",
  authDomain: "storage-94ae1.firebaseapp.com",
  projectId: "storage-94ae1",
  storageBucket: "storage-94ae1.appspot.com",
  messagingSenderId: "531909726442",
  appId: "1:531909726442:web:4a94bfed40dd58f85a8793"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const storage = getStorage(app);

// Upload function
async function uploadPhoto(file) {
  if (!file) { alert("Select a file"); return; }
  const storageRef = ref(storage, 'photos/' + file.name);
  await uploadBytes(storageRef, file);
  alert("Upload Complete!");
  loadGallery();
}

// Load gallery function
async function loadGallery() {
  const galleryDiv = document.getElementById('gallery');
  galleryDiv.innerHTML = '';
  const listRef = ref(storage, 'photos/');
  const res = await listAll(listRef);
  for (let itemRef of res.items) {
    const url = await getDownloadURL(itemRef);
    const img = document.createElement('img');
    img.src = url;
    img.style.width = '200px';
    img.style.margin = '10px';
    img.style.borderRadius = '8px';
    galleryDiv.appendChild(img);
  }
}

// Load gallery on page load
loadGallery();

window.uploadPhoto = uploadPhoto;
</script>

</body>
</html>
